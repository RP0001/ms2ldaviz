{% extends 'base.html' %}
{% load custom_tags %}

{% block title %}Select an experiment{% endblock %}

{% block body_block %}

<h2>Single-file LDA Experiments</h2>
<p>Once an experiment is selected, you can use the arrow keys to navigate to other experiments. Press <b>Enter</b> to open or close an experiment.</p>
<div id="accordion">
{% for experiment in experiments|dictsort:"name" %}
    <h3><b>{{experiment.name}}</b> ({{experiment.description}})</h3>
    <div>
        <a href="/basicviz/show_docs/{{experiment.id}}" class="btn btn-block btn-default"><span class="glyphicon glyphicon-export"></span>Show Parents</a>
        <a href="/basicviz/view_mass2motifs/{{experiment.id}}" class="btn btn-block btn-default"><span class="glyphicon glyphicon-barcode"></span> Show Motifs</a>
        <a href="/basicviz/start_viz/{{experiment.id}}" class="btn btn-block btn-default"><span class="glyphicon glyphicon-stats"></span> Start Visualisation</a>
        {% if extra_user %}
            <a href="/basicviz/validation/{{experiment.id}}" class="btn btn-block btn-default"><span class="glyphicon glyphicon-thumbs-up"></span> Validate for Justin</a>
            <!-- a href="/basicviz/document_pca/{{experiment.id}}" class="btn btn-block btn-success">Document PCA</a -->
            <a href="/basicviz/topic_pca/{{experiment.id}}" class="btn btn-block btn-default"><span class="glyphicon glyphicon-eye-open"></span> Topic PCA</a>
            <a href="/basicviz/topic_table/{{experiment.id}}" class="btn btn-block btn-default"><span class="glyphicon glyphicon-list-alt"></span> Topic Table</a>
            <a href="/basicviz/extract_docs/{{experiment.id}}" class="btn btn-block btn-default"><span class="glyphicon glyphicon-folder-close"></span> Extract Documents</a>
            <a href="/basicviz/compute_topic_scores/{{experiment.id}}" class="btn btn-block btn-default"><span class="glyphicon glyphicon-sort-by-order"></span> Compute Topic Scores</a>
            <a href="/basicviz/rate_by_conserved_motif_rating/{{experiment.id}}" class="btn btn-block btn-default"><span class="glyphicon glyphicon-indent-right"></span> Rate by Conserved Motifs</a>
            <a href="/basicviz/view_experiment_options/{{experiment.id}}" class="btn btn-block btn-default"><span class="glyphicon glyphicon-option-horizontal"></span> View experiment options</a>
        {% endif %}
    </div>
{% endfor %}
</div>

{% if extra_user %}
	<hr />
	<h2>Multi-file LDA Experiments</h2>
    <p>Once an experiment is selected, you can use the arrow keys to navigate to other experiments. Press <b>Enter</b> to open or close an experiment.</p>
    <div id="accordion2">
        {% for mf in mfe|sort_by:'name' %}
            <h3><b>{{mf.name}}</b> ({{mf.description}})</h3>
            <div>
                <p>
                    <A href="/basicviz/multi_alphas/{{mf.id}}" class="btn btn-block btn-default"><span class="glyphicon glyphicon-signal"></span> Explore alphas</A>
                    <A href="/basicviz/alpha_correlation/{{mf.id}}" class="btn btn-block btn-default"><span class="glyphicon glyphicon-tasks"></span> Alpha correlation</A>
                    <A href="/basicviz/alpha_de/{{mf.id}}" class = "btn btn-block btn-default"><span class="glyphicon glyphicon-object-align-bottom"></span> Alpha Differential Expression</A>
                    <A href="/basicviz/view_mf_experiment_options/{{mf.id}}" class="btn btn-block btn-default"><span class="glyphicon glyphicon-option-horizontal"></span> View options</A>
                    <A href="/basicviz/wipe_cache/{{mf.id}}" class="btn btn-block btn-default" title="(force recomputation of alpha tables when, e.g. annotations have been added)"><span class="glyphicon glyphicon-exclamation-sign"></span> Wipe Cache</A>
                </p>
                <table class="table">
                    {% for exp in mf.multilink_set.all|sort_by:'experiment__name' %}
                        <tr>
                            <td>{{exp.experiment}}</td>
                            <td><a href="/basicviz/show_docs/{{exp.experiment.id}}" class="btn btn-xs btn-default"><span class="glyphicon glyphicon-export"></span>Show Parents</a></td>
                            <td><a href="/basicviz/view_mass2motifs/{{exp.experiment.id}}" class="btn btn-xs btn-default"><span class="glyphicon glyphicon-barcode"></span> Show Motifs</a></td>
                            <td><a href="/basicviz/start_viz/{{exp.experiment.id}}" class="btn btn-xs btn-default"><span class="glyphicon glyphicon-stats"></span> Start Visualisation</a></td>
                            <td><a href="/basicviz/topic_table/{{exp.experiment.id}}" class="btn btn-xs btn-default"><span class="glyphicon glyphicon-list-alt"></span> Topic Table</a></td>
                            <td><a href="/basicviz/rate_by_conserved_motif_rating/{{exp.experiment.id}}" class="btn btn-xs btn-default"><span class="glyphicon glyphicon-indent-right"></span> Rate by Conserved Motifs</a></td>
                        </tr>
                    {% endfor %}
                </table>
            </div>
        {% endfor %}
    </div>
{% endif %}

{% endblock %}

{% block js_block %}

<script>
    $( function() {
        $( "#accordion" ).accordion({
            collapsible: true,
            heightStyle: "content",
            active: false
        });
    } );
    $( function() {
        $( "#accordion2" ).accordion({
            collapsible: true,
            heightStyle: "content",
            active: false
        });
    } );
</script>

{% endblock %}
